/*!
Filterize, a jQuery Plugin to filter select list
by Eduard Deza for Hiringo Team, http://hiringo.com

Version 1.0.0
Full source at https://github.com/edezacas/Filterize

MIT License, https://github.com/edezacas/Filterize/blob/master/LICENSE.md
*/

!function(e,t,i){function n(t,i){this.element=t,this._name=s,this._defaults=e.fn[s].defaults,this.options=e.extend({},this._defaults,i),this.init()}var s="filterize";e.extend(n.prototype,{init:function(){this.buildWrapper(),this.buildSelect(),this.buildCache(),this.bindEvents()},buildWrapper:function(){var t=e(this.element);t.wrap('<div class="filterize-wrap"></div>').append('<option class="filterize-no_results" value="no-results">'+this.options.noresultsText+"</option>");var i=t.parent();i.prepend('<div class="filterize-title">'+this.options.titleText+'</div><div class="filterize-list"><ul></ul></div>')},buildSelect:function(){var t=e(this.element),n=t.parent(),s=n.find(".filterize-list"),l=n.find("ul"),o=n.find(".filterize-title");o.css("min-width",o.outerWidth());for(var r=0,a=t.children("option").length;a>r;r++){var u=t.children("option").eq(r),d=u.attr("class");"undefined"==typeof d&&(d=""),l.append('<li class="'+d+'" data-value="'+u.val()+'"><p>'+u.text()+"</p></li>")}s.prepend('<div class="filterize-list-search"><input type="text" autocomplete="off" tabindex="1"></div>'),t.hide(),o.on("click",function(){s.stop(!0,!0).slideToggle(),e(this).toggleClass("active")}),e(i).on("click",function(t){e(t.target).closest(n).length||s.is(":visible")&&(s.stop(!0,!0).slideUp(),o.toggleClass("active"))}),this.fireSearch()},buildCache:function(){this.$element=e(this.element)},bindEvents:function(){var e=this;e.$element.on("filterize:update."+e._name,function(){e.update.call(e)})},update:function(){var t=e(this.element),i=t.parent(),n=(i.find(".filterize-list"),i.find("ul")),s=t.find(".filterize-no_results");s.length||t.append('<option class="filterize-no_results" value="no-results">'+this.options.noresultsText+"</option>"),n.empty();for(var l=0,o=t.children("option").length;o>l;l++){var r=t.children("option").eq(l),a=r.attr("class");"undefined"==typeof a&&(a=""),n.append('<li class="'+a+'" data-value="'+r.val()+'"><p>'+r.text()+"</p></li>")}},fireSearch:function(){var t=e(this.element),i=t.parent(),n=i.find(".filterize-list"),s=i.find("ul"),l=i.find(".filterize-title");s.on("click","li",function(){var i=e(this).data("value"),s=e(this).find("p").text();l.text(s),n.slideUp(),t.val(i),t.trigger("change"),l.toggleClass("active")}),e(".filterize-list-search input").on("change",function(){var t=e(this).val(),n=i.find("ul");if(elNoRes=e(n).find(".filterize-no_results"),t){var s=e(n).find("p:containsIN("+t+")"),l=s.parent();e("li",n).not(l).stop(!0,!1).hide(),l.stop(!0,!1).show(),elNoRes.stop(!0,!1).hide(),s.length||elNoRes.stop(!0,!1).show()}else elNoRes.stop(!0,!1).hide(),e(n).find("li:not(.filterize-no_results)").show();return!1}).keyup(function(){e(this).change()}),"1.8.0"!=e.fn.jquery?e.extend(e.expr[":"],{containsIN:function(e,t,i){return(e.textContent||e.innerText||"").toLowerCase().indexOf((i[3]||"").toLowerCase())>=0}}):jQuery.expr[":"].containsIN=jQuery.expr.createPseudo(function(e){return function(t){return jQuery(t).text().toUpperCase().indexOf(e.toUpperCase())>=0}})}}),e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new n(this,t))}),this},e.fn[s].defaults={titleText:"Select an option",noresultsText:"No results matched"}}(jQuery,window,document);