/*!
Filterize, a jQuery Plugin to filter select list
by Eduard Deza for Hiringo Team, http://hiringo.com

Version 1.0.2
Full source at https://github.com/edezacas/Filterize

MIT License, https://github.com/edezacas/Filterize/blob/master/LICENSE.md
*/
!function(t,e,i){function s(e,i){this.element=e,this._name=n,this._defaults=t.fn[n].defaults,this.options=t.extend({},this._defaults,i),this.init()}var n="filterize";t.extend(s.prototype,{init:function(){this.buildWrapper(),this.buildSelect(),this.buildCache(),this.bindEvents()},buildWrapper:function(){var e=t(this.element);e.wrap('<div class="filterize-wrap"></div>').append('<option class="filterize-no_results" value="no-results">'+this.options.noresultsText+"</option>");var i=e.parent();i.prepend('<div class="filterize-title">'+this.options.titleText+'</div><div class="filterize-list"><ul></ul></div>')},buildSelect:function(){var e=t(this.element),s=e.parent(),n=s.find(".filterize-list"),l=s.find("ul"),r=s.find(".filterize-title");r.css("min-width",r.outerWidth());for(var o=0,a=e.children("option").length;a>o;o++){var c=e.children("option").eq(o),u=c.attr("class");"undefined"==typeof u&&(u=""),l.append('<li class="'+u+'" data-value="'+c.val()+'"><p>'+c.text()+"</p></li>")}n.prepend('<div class="filterize-list-search"><input type="text" autocomplete="off" tabindex="1"></div>'),e.hide(),t(i).on("click",function(e){t(e.target).closest(s).length||n.is(":visible")&&(n.stop(!0,!0).slideUp(),r.toggleClass("active"))}),this.fireSearch()},buildCache:function(){this.$element=t(this.element),this.$titleField=t(this.element).siblings(".filterize-title"),this.$list=t(this.element).siblings(".filterize-list"),this.$listBox=this.$list.find("ul"),this.$searchField=this.$list.find("input").first(),this.$currentListEle=this.getCurrentEle()},bindEvents:function(){var t=this;t.$element.on("filterize:update."+t._name,function(){t.update.call(t)}),t.$titleField.on("click."+t._name,function(){t.toggleList.call(t)}),t.$list.on("click."+t._name,"li",function(){t.setSearchValue.call(t)}),t.$list.on("mouseover."+t._name,"li",function(){t.setListFocus.call(t,this)}),t.$searchField.on("keydown."+t._name,function(e){t.keypress_checker.call(t,e)})},update:function(){var e=t(this.element),i=(e.parent(),this.$list),s=i.find("ul"),n=e.find(".filterize-no_results");n.length||e.append('<option class="filterize-no_results" value="no-results">'+this.options.noresultsText+"</option>"),s.empty();for(var l=0,r=e.children("option").length;r>l;l++){var o=e.children("option").eq(l),a=o.attr("class");"undefined"==typeof a&&(a=""),s.append('<li class="'+a+'" data-value="'+o.val()+'"><p>'+o.text()+"</p></li>")}},keypress_checker:function(t){var e=t.which;switch(e){case 13:t.preventDefault(),this.setSearchValue();break;case 38:t.preventDefault(),this.setPrevEle();break;case 40:t.preventDefault(),this.setNextEle()}},setListFocus:function(t){this.removeListFocus(this.$currentListEle),this.setCurrentEle(t),this.$currentListEle.addClass("selected")},removeListFocus:function(e){t(e).removeClass("selected")},toggleList:function(){this.$list.stop(!0,!0).slideToggle(),this.$titleField.toggleClass("active"),this.$searchField.trigger("focus")},setCurrentEle:function(e){return this.$currentListEle=t(e),this.$currentListEle},getCurrentEle:function(){var t=this.$list.find("li.selected");return t.length||(t=this.$list.find("li").first().addClass("selected")),t},setNextEle:function(){var t=this.$currentListEle.removeClass("selected").next();this.doSelected(t)},setPrevEle:function(){var t=this.$currentListEle.removeClass("selected").prev();this.doSelected(t)},doSelected:function(t){var e,i,s,n,l;t.addClass("selected"),this.$currentListEle=this.getCurrentEle(),s=parseInt(this.$listBox.css("maxHeight"),10),inputHeight=this.$searchField.outerHeight(!0),l=this.$listBox.scrollTop(),n=s+l,i=this.$currentListEle.position().top+this.$listBox.scrollTop()-inputHeight-10,e=i+this.$currentListEle.outerHeight(!0),e>=n?this.$listBox.scrollTop(e-s>0?e-s:0):l>i&&this.$listBox.scrollTop(i)},setSearchValue:function(){var t=this.$currentListEle.data("value"),e=this.$currentListEle.find("p").text();this.$titleField.text(e),this.$list.slideUp(),this.$element.val(t),this.$element.trigger("change"),this.$titleField.toggleClass("active")},fireSearch:function(){{var e=t(this.element),i=e.parent(),s=i.find("ul");this.$titleField}t(".filterize-list-search input").on("change",function(){var e=t(this).val(),i=t(s).find(".filterize-no_results");if(e){var n=t(s).find("p:containsIN("+e+")"),l=n.parent();t("li",s).not(l).stop(!0,!1).hide(),l.stop(!0,!1).show(),i.stop(!0,!1).hide(),n.length||i.stop(!0,!1).show()}else i.stop(!0,!1).hide(),t(s).find("li:not(.filterize-no_results)").show();return!1}).keyup(function(){t(this).change()}),"1.8.0"!=t.fn.jquery?t.extend(t.expr[":"],{containsIN:function(t,e,i){return(t.textContent||t.innerText||"").toLowerCase().indexOf((i[3]||"").toLowerCase())>=0}}):jQuery.expr[":"].containsIN=jQuery.expr.createPseudo(function(t){return function(e){return jQuery(e).text().toUpperCase().indexOf(t.toUpperCase())>=0}})}}),t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new s(this,e))}),this},t.fn[n].defaults={titleText:"Select an option",noresultsText:"No results matched"}}(jQuery,window,document);